{"remainingRequest":"/Users/yang77/Desktop/h5-exam/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yang77/Desktop/h5-exam/src/views/ExamList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yang77/Desktop/h5-exam/src/views/ExamList.vue","mtime":1585409580958},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3R1SWQ6IG51bGwsCiAgICAgIG5vdFRlc3RMaXN0OiBbXSwKICAgICAgdGVzdGVkTGlzdDogW10KICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICBkb2N1bWVudC50aXRsZSA9ICfogIPor5XliJfooagnCiAgICB0aGlzLnN0dUlkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3N0dUlkJykKICAgIHRoaXMuZ2V0RXhhbUxpc3QoKQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0RXhhbUxpc3QoKSB7CiAgICAgIHRoaXMuJGFqYXguZ2V0KGAvaG11L2dldEdyYWRlQnlTdHVJZC8ke3RoaXMuc3R1SWR9YCkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMucmVzdWx0ID09PSAwKSB7CiAgICAgICAgICByZXMuZGF0YS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICBpZiAoaXRlbS5pc1VwbG9hZCkgewogICAgICAgICAgICAgIHRoaXMudGVzdGVkTGlzdC5wdXNoKGl0ZW0pCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5ub3RUZXN0TGlzdC5wdXNoKGl0ZW0pCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJHRvYXN0LnRleHQocmVzLmVyck1zZykKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgc3RhcnRFeGFtKGV4YW1OYW1lKSB7CiAgICAgIHRoaXMuJGFqYXguZ2V0KGAvaG11L2dldFRpbWUvJHtleGFtTmFtZX0vJHt0aGlzLnN0dUlkfWApLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnJlc3VsdCA9PT0gMCkgewogICAgICAgICAgbGV0IHRpbWUgPSByZXMuZGF0YS5kdXJpbmcKICAgICAgICAgIGlmICh0aW1lID4gMCkgewogICAgICAgICAgICBsZXQgc3RyID0gcGFyc2VJbnQodGltZSAvIDYwKQogICAgICAgICAgICBzdHIgKz0gJ+WIhicKICAgICAgICAgICAgc3RyICs9IHRpbWUgJSA2MAogICAgICAgICAgICBzdHIgKz0gJ+enkicKICAgICAgICAgICAgdGhpcy4kdG9hc3QudGV4dCgn6Led56a76ICD6K+V5byA5aeLJyArIHN0cikKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRpbWUgPCAtMTgwMCkgewogICAgICAgICAgICB0aGlzLiR0b2FzdC50ZXh0KCfogIPor5Xlt7Lnu5PmnZ8nKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIG5hbWU6ICdleGFtZGV0YWlscycsCiAgICAgICAgICAgIHF1ZXJ5OiB7IGV4YW1OYW1lOiBleGFtTmFtZSB9CiAgICAgICAgICB9KQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiR0b2FzdC50ZXh0KHJlcy5lcnJNc2cpCiAgICAgICAgfQogICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["ExamList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ExamList.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"exam-list\">\n    <div class=\"not-tested\">\n      <div class=\"title\">待考科目</div>\n      <div v-if=\"!notTestList.length\" class=\"no-exam\">\n        暂无待考科目\n      </div>\n      <ul>\n        <li>\n          <span>考试名称</span>\n          <span>考试时间</span>\n          <span>操作</span>\n        </li>\n        <li v-for=\"(item, index) in notTestList\" :key=\"index\">\n          <span>{{ item.examName }}</span>\n          <span>{{ item.examTime }}</span>\n          <nut-button small @click=\"startExam(item.examName)\">\n            开始考试\n          </nut-button>\n        </li>\n      </ul>\n    </div>\n    <div class=\"tested\">\n      <div class=\"title\">已考科目</div>\n      <div v-if=\"!testedList.length\" class=\"no-exam\">\n        暂无已考科目\n      </div>\n      <ul v-else>\n        <li>\n          <span>考试名称</span>\n          <span>考试成绩</span>\n          <span>考试时间</span>\n        </li>\n        <li v-for=\"(item, index) in testedList\" :key=\"index\">\n          <span>{{ item.examName }}</span>\n          <span>{{ item.score }}</span>\n          <span>{{ item.examTime }}</span>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      stuId: null,\n      notTestList: [],\n      testedList: []\n    }\n  },\n  mounted() {\n    document.title = '考试列表'\n    this.stuId = localStorage.getItem('stuId')\n    this.getExamList()\n  },\n  methods: {\n    getExamList() {\n      this.$ajax.get(`/hmu/getGradeByStuId/${this.stuId}`).then(res => {\n        if (res.result === 0) {\n          res.data.forEach(item => {\n            if (item.isUpload) {\n              this.testedList.push(item)\n            } else {\n              this.notTestList.push(item)\n            }\n          })\n        } else {\n          this.$toast.text(res.errMsg)\n        }\n      })\n    },\n    startExam(examName) {\n      this.$ajax.get(`/hmu/getTime/${examName}/${this.stuId}`).then(res => {\n        if (res.result === 0) {\n          let time = res.data.during\n          if (time > 0) {\n            let str = parseInt(time / 60)\n            str += '分'\n            str += time % 60\n            str += '秒'\n            this.$toast.text('距离考试开始' + str)\n            return;\n          }\n          if (time < -1800) {\n            this.$toast.text('考试已结束')\n            return;\n          }\n          this.$router.push({\n            name: 'examdetails',\n            query: { examName: examName }\n          })\n        } else {\n          this.$toast.text(res.errMsg)\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.exam-list {\n  box-sizing: border-box;\n  padding: 12px;\n  .not-tested {\n    .title {\n      margin: 0 0 10px 0;\n    }\n  }\n  .tested {\n    .title {\n      margin: 20px 0 10px 0;\n    }\n  }\n  li {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1px solid #eaeaea;\n    padding: 10px 0;\n  }\n  .title {\n    font-size: 20px;\n  }\n  .no-exam {\n    text-align: center;\n    font-size: 16px;\n  }\n}\n</style>\n"]}]}