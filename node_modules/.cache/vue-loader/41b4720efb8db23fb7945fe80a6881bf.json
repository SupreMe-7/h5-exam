{"remainingRequest":"/Users/yang77/Desktop/h5-exam/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yang77/Desktop/h5-exam/src/views/ExamList.vue?vue&type=style&index=0&id=87a8fe40&lang=less&scoped=true&","dependencies":[{"path":"/Users/yang77/Desktop/h5-exam/src/views/ExamList.vue","mtime":1585409580958},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5leGFtLWxpc3QgewogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgcGFkZGluZzogMTJweDsKICAubm90LXRlc3RlZCB7CiAgICAudGl0bGUgewogICAgICBtYXJnaW46IDAgMCAxMHB4IDA7CiAgICB9CiAgfQogIC50ZXN0ZWQgewogICAgLnRpdGxlIHsKICAgICAgbWFyZ2luOiAyMHB4IDAgMTBweCAwOwogICAgfQogIH0KICBsaSB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWFlYWVhOwogICAgcGFkZGluZzogMTBweCAwOwogIH0KICAudGl0bGUgewogICAgZm9udC1zaXplOiAyMHB4OwogIH0KICAubm8tZXhhbSB7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBmb250LXNpemU6IDE2cHg7CiAgfQp9Cg=="},{"version":3,"sources":["ExamList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ExamList.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"exam-list\">\n    <div class=\"not-tested\">\n      <div class=\"title\">待考科目</div>\n      <div v-if=\"!notTestList.length\" class=\"no-exam\">\n        暂无待考科目\n      </div>\n      <ul>\n        <li>\n          <span>考试名称</span>\n          <span>考试时间</span>\n          <span>操作</span>\n        </li>\n        <li v-for=\"(item, index) in notTestList\" :key=\"index\">\n          <span>{{ item.examName }}</span>\n          <span>{{ item.examTime }}</span>\n          <nut-button small @click=\"startExam(item.examName)\">\n            开始考试\n          </nut-button>\n        </li>\n      </ul>\n    </div>\n    <div class=\"tested\">\n      <div class=\"title\">已考科目</div>\n      <div v-if=\"!testedList.length\" class=\"no-exam\">\n        暂无已考科目\n      </div>\n      <ul v-else>\n        <li>\n          <span>考试名称</span>\n          <span>考试成绩</span>\n          <span>考试时间</span>\n        </li>\n        <li v-for=\"(item, index) in testedList\" :key=\"index\">\n          <span>{{ item.examName }}</span>\n          <span>{{ item.score }}</span>\n          <span>{{ item.examTime }}</span>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      stuId: null,\n      notTestList: [],\n      testedList: []\n    }\n  },\n  mounted() {\n    document.title = '考试列表'\n    this.stuId = localStorage.getItem('stuId')\n    this.getExamList()\n  },\n  methods: {\n    getExamList() {\n      this.$ajax.get(`/hmu/getGradeByStuId/${this.stuId}`).then(res => {\n        if (res.result === 0) {\n          res.data.forEach(item => {\n            if (item.isUpload) {\n              this.testedList.push(item)\n            } else {\n              this.notTestList.push(item)\n            }\n          })\n        } else {\n          this.$toast.text(res.errMsg)\n        }\n      })\n    },\n    startExam(examName) {\n      this.$ajax.get(`/hmu/getTime/${examName}/${this.stuId}`).then(res => {\n        if (res.result === 0) {\n          let time = res.data.during\n          if (time > 0) {\n            let str = parseInt(time / 60)\n            str += '分'\n            str += time % 60\n            str += '秒'\n            this.$toast.text('距离考试开始' + str)\n            return;\n          }\n          if (time < -1800) {\n            this.$toast.text('考试已结束')\n            return;\n          }\n          this.$router.push({\n            name: 'examdetails',\n            query: { examName: examName }\n          })\n        } else {\n          this.$toast.text(res.errMsg)\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.exam-list {\n  box-sizing: border-box;\n  padding: 12px;\n  .not-tested {\n    .title {\n      margin: 0 0 10px 0;\n    }\n  }\n  .tested {\n    .title {\n      margin: 20px 0 10px 0;\n    }\n  }\n  li {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1px solid #eaeaea;\n    padding: 10px 0;\n  }\n  .title {\n    font-size: 20px;\n  }\n  .no-exam {\n    text-align: center;\n    font-size: 16px;\n  }\n}\n</style>\n"]}]}