{"remainingRequest":"/Users/yang77/Desktop/h5-exam/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yang77/Desktop/h5-exam/src/views/ExamDetails.vue?vue&type=style&index=0&id=5a144956&lang=less&scoped=true&","dependencies":[{"path":"/Users/yang77/Desktop/h5-exam/src/views/ExamDetails.vue","mtime":1585407864358},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZXhhbS1kZXRhaWxzIHsKICAudGl0bGUgewogICAgZm9udC1zaXplOiAxOHB4OwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogIH0KICAuY291bnQtZG93biB7CiAgICBtYXJnaW46IDEwcHg7CiAgICB0ZXh0LWFsaWduOiByaWdodDsKICB9CiAgLmRlc2NyaXB0aW9uIHsKICAgIG1hcmdpbjogMCAwIDIwcHggMDsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICB9CiAgLmNvbnRlbnQgewogICAgLnRvcGljIHsKICAgICAgbWFyZ2luOiAwIDAgMTBweCAwOwogICAgfQogICAgLmV4YW0taXRlbSB7CiAgICAgIG1hcmdpbjogMTJweDsKICAgIH0KICB9CiAgLnN1Ym1pdCB7CiAgICBtYXJnaW46IDUwcHggMCA0MHB4IDA7CiAgfQp9Cg=="},{"version":3,"sources":["ExamDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ExamDetails.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"exam-details\">\n    <div class=\"title\">\n      {{ examName }}\n    </div>\n    <div class=\"count-down\">剩余时间: {{ endTimeShow }}</div>\n    <div class=\"description\">\n      单项选择题，每题5分，多选，错选均不得分，20题，共计100分\n    </div>\n    <div class=\"content\">\n      <div class=\"exam-item\" v-for=\"(item, index) in topicList\" :key=\"index\">\n        <div class=\"topic\">{{ index + 1 }}.{{ item.question }}</div>\n        <nut-radiogroup v-model=\"item.stuAnswer\">\n          <div>\n            <nut-radio label=\"A\">A:{{ item.a }}</nut-radio>\n          </div>\n          <div>\n            <nut-radio label=\"B\">B.{{ item.b }}</nut-radio>\n          </div>\n          <div>\n            <nut-radio label=\"C\">C.{{ item.c }}</nut-radio>\n          </div>\n          <div>\n            <nut-radio label=\"D\">D.{{ item.d }}</nut-radio>\n          </div>\n        </nut-radiogroup>\n      </div>\n    </div>\n    <div class=\"submit\">\n      <nut-button block shape=\"circle\" @click=\"submit\">\n        提交试卷\n      </nut-button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      stuId: null,\n      examName: null,\n      endTime: 30 * 60,\n      endTimeShow: null,\n      topicList: []\n    }\n  },\n  mounted() {\n    this.examName = this.$route.query.examName\n    this.stuId = localStorage.getItem('stuId')\n    document.title = this.examName\n    this.countDown()\n    this.getExamList()\n  },\n  methods: {\n    getExamList() {\n      this.$ajax.get(`/hmu/getPaperByExam/${this.examName}`).then(res => {\n        if (res.result === 0) {\n          this.topicList = res.data.select.questions\n        } else {\n          this.$toast.text(res.errMsg)\n        }\n      })\n    },\n    startExam() {\n      this.$ajax\n        .get(`/hmu/getTime/${this.examName}/${this.stuId}`)\n        .then(res => {\n          if (res.result === 0) {\n            let time = res.data.during\n            if (time < -1800) {\n              this.$toast.text('考试已结束')\n              return\n            }\n            this.endTime = this.endTime + time\n          } else {\n            this.$toast.text(res.errMsg)\n          }\n        })\n    },\n    submit() {\n      let postData = {\n        score: 0,\n        answer: [],\n        questionId: [],\n        isRight: [],\n        stuId: this.stuId,\n        examName: this.examName\n      }\n      this.topicList.forEach(item => {\n        postData.answer.push(item.stuAnswer)\n        postData.questionId.push(item.questionId)\n        if (item.rightAnswer === item.stuAnswer) {\n          postData.score += 5\n          postData.isRight.push(1)\n        } else {\n          postData.isRight.push(0)\n        }\n      })\n      postData = JSON.stringify(postData)\n      this.$ajax\n        .post(`/hmu/upload?param=${encodeURIComponent(postData)}`)\n        .then(res => {\n          if (res.result === 0) {\n            this.$toast.text('提交成功')\n            this.$router.push({ name: 'examlist' })\n          } else {\n            this.$toast.text(res.errMsg)\n          }\n        })\n    },\n    countDown() {\n      this.startExam()\n      const that = this\n      let timeInt = setInterval(() => {\n        that.endTime = that.endTime - 1\n        that.endTimeShow =\n          Math.floor(that.endTime / 60) + '分' + (that.endTime % 60) + '秒'\n        if (that.endTime === 0) {\n          that.submit()\n        }\n      }, 1000)\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.exam-details {\n  .title {\n    font-size: 18px;\n    text-align: center;\n  }\n  .count-down {\n    margin: 10px;\n    text-align: right;\n  }\n  .description {\n    margin: 0 0 20px 0;\n    text-align: center;\n  }\n  .content {\n    .topic {\n      margin: 0 0 10px 0;\n    }\n    .exam-item {\n      margin: 12px;\n    }\n  }\n  .submit {\n    margin: 50px 0 40px 0;\n  }\n}\n</style>\n\n<style lang=\"less\">\n.exam-details {\n  .nut-radio-label {\n    font-size: 16px !important;\n  }\n}\n</style>\n"]}]}