{"remainingRequest":"/Users/yang77/Desktop/h5-exam/node_modules/babel-loader/lib/index.js!/Users/yang77/Desktop/h5-exam/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yang77/Desktop/h5-exam/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yang77/Desktop/h5-exam/src/views/ExamDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yang77/Desktop/h5-exam/src/views/ExamDetails.vue","mtime":1585408941705},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdHVJZDogbnVsbCwKICAgICAgZXhhbU5hbWU6IG51bGwsCiAgICAgIGVuZFRpbWU6IDMwICogNjAsCiAgICAgIGVuZFRpbWVTaG93OiBudWxsLAogICAgICB0b3BpY0xpc3Q6IFtdCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZXhhbU5hbWUgPSB0aGlzLiRyb3V0ZS5xdWVyeS5leGFtTmFtZTsKICAgIHRoaXMuc3R1SWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc3R1SWQnKTsKICAgIGRvY3VtZW50LnRpdGxlID0gdGhpcy5leGFtTmFtZTsKICAgIHRoaXMuY291bnREb3duKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRFeGFtTGlzdDogZnVuY3Rpb24gZ2V0RXhhbUxpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRhamF4LmdldCgiL2htdS9nZXRQYXBlckJ5RXhhbS8iLmNvbmNhdCh0aGlzLmV4YW1OYW1lKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5yZXN1bHQgPT09IDApIHsKICAgICAgICAgIF90aGlzLnRvcGljTGlzdCA9IHJlcy5kYXRhLnNlbGVjdC5xdWVzdGlvbnM7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLiR0b2FzdC50ZXh0KHJlcy5lcnJNc2cpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc3RhcnRFeGFtOiBmdW5jdGlvbiBzdGFydEV4YW0oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy4kYWpheC5nZXQoIi9obXUvZ2V0VGltZS8iLmNvbmNhdCh0aGlzLmV4YW1OYW1lLCAiLyIpLmNvbmNhdCh0aGlzLnN0dUlkKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5yZXN1bHQgPT09IDApIHsKICAgICAgICAgIHZhciB0aW1lID0gcmVzLmRhdGEuZHVyaW5nOwoKICAgICAgICAgIGlmICh0aW1lID4gMCkgewogICAgICAgICAgICBfdGhpczIuJHRvYXN0LnRleHQoJ+iAg+ivleacquW8gOWniycpOwoKICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9ICcvIy9leGFtbGlzdCc7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodGltZSA8IC0xODAwKSB7CiAgICAgICAgICAgIF90aGlzMi4kdG9hc3QudGV4dCgn6ICD6K+V5bey57uT5p2fJyk7CgogICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gJy8jL2V4YW1saXN0JzsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzMi5nZXRFeGFtTGlzdCgpOwoKICAgICAgICAgIF90aGlzMi5lbmRUaW1lID0gX3RoaXMyLmVuZFRpbWUgKyB0aW1lOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczIuJHRvYXN0LnRleHQocmVzLmVyck1zZyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzdWJtaXQ6IGZ1bmN0aW9uIHN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgcG9zdERhdGEgPSB7CiAgICAgICAgc2NvcmU6IDAsCiAgICAgICAgYW5zd2VyOiBbXSwKICAgICAgICBxdWVzdGlvbklkOiBbXSwKICAgICAgICBpc1JpZ2h0OiBbXSwKICAgICAgICBzdHVJZDogdGhpcy5zdHVJZCwKICAgICAgICBleGFtTmFtZTogdGhpcy5leGFtTmFtZQogICAgICB9OwogICAgICB0aGlzLnRvcGljTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcG9zdERhdGEuYW5zd2VyLnB1c2goaXRlbS5zdHVBbnN3ZXIpOwogICAgICAgIHBvc3REYXRhLnF1ZXN0aW9uSWQucHVzaChpdGVtLnF1ZXN0aW9uSWQpOwoKICAgICAgICBpZiAoaXRlbS5yaWdodEFuc3dlciA9PT0gaXRlbS5zdHVBbnN3ZXIpIHsKICAgICAgICAgIHBvc3REYXRhLnNjb3JlICs9IDU7CiAgICAgICAgICBwb3N0RGF0YS5pc1JpZ2h0LnB1c2goMSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHBvc3REYXRhLmlzUmlnaHQucHVzaCgwKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBwb3N0RGF0YSA9IEpTT04uc3RyaW5naWZ5KHBvc3REYXRhKTsKICAgICAgdGhpcy4kYWpheC5wb3N0KCIvaG11L3VwbG9hZD9wYXJhbT0iLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQocG9zdERhdGEpKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5yZXN1bHQgPT09IDApIHsKICAgICAgICAgIF90aGlzMy4kdG9hc3QudGV4dCgn5o+Q5Lqk5oiQ5YqfJyk7CgogICAgICAgICAgX3RoaXMzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIG5hbWU6ICdleGFtbGlzdCcKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczMuJHRvYXN0LnRleHQocmVzLmVyck1zZyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjb3VudERvd246IGZ1bmN0aW9uIGNvdW50RG93bigpIHsKICAgICAgdGhpcy5zdGFydEV4YW0oKTsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICB2YXIgdGltZUludCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGF0LmVuZFRpbWUgPSB0aGF0LmVuZFRpbWUgLSAxOwogICAgICAgIHRoYXQuZW5kVGltZVNob3cgPSBNYXRoLmZsb29yKHRoYXQuZW5kVGltZSAvIDYwKSArICfliIYnICsgdGhhdC5lbmRUaW1lICUgNjAgKyAn56eSJzsKCiAgICAgICAgaWYgKHRoYXQuZW5kVGltZSA9PT0gMCkgewogICAgICAgICAgdGhhdC5zdWJtaXQoKTsKICAgICAgICB9CiAgICAgIH0sIDEwMDApOwogICAgfQogIH0KfTs="},{"version":3,"sources":["ExamDetails.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"exam-details\">\n    <div class=\"title\">\n      {{ examName }}\n    </div>\n    <div class=\"count-down\">剩余时间: {{ endTimeShow }}</div>\n    <div class=\"description\">\n      单项选择题，每题5分，多选，错选均不得分，20题，共计100分\n    </div>\n    <div class=\"content\">\n      <div class=\"exam-item\" v-for=\"(item, index) in topicList\" :key=\"index\">\n        <div class=\"topic\">{{ index + 1 }}.{{ item.question }}</div>\n        <nut-radiogroup v-model=\"item.stuAnswer\">\n          <div>\n            <nut-radio label=\"A\">A:{{ item.a }}</nut-radio>\n          </div>\n          <div>\n            <nut-radio label=\"B\">B.{{ item.b }}</nut-radio>\n          </div>\n          <div>\n            <nut-radio label=\"C\">C.{{ item.c }}</nut-radio>\n          </div>\n          <div>\n            <nut-radio label=\"D\">D.{{ item.d }}</nut-radio>\n          </div>\n        </nut-radiogroup>\n      </div>\n    </div>\n    <div class=\"submit\">\n      <nut-button block shape=\"circle\" @click=\"submit\">\n        提交试卷\n      </nut-button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      stuId: null,\n      examName: null,\n      endTime: 30 * 60,\n      endTimeShow: null,\n      topicList: []\n    }\n  },\n  mounted() {\n    this.examName = this.$route.query.examName\n    this.stuId = localStorage.getItem('stuId')\n    document.title = this.examName\n    this.countDown()\n  },\n  methods: {\n    getExamList() {\n      this.$ajax.get(`/hmu/getPaperByExam/${this.examName}`).then(res => {\n        if (res.result === 0) {\n          this.topicList = res.data.select.questions\n        } else {\n          this.$toast.text(res.errMsg)\n        }\n      })\n    },\n    startExam() {\n      this.$ajax\n        .get(`/hmu/getTime/${this.examName}/${this.stuId}`)\n        .then(res => {\n          if (res.result === 0) {\n            let time = res.data.during\n            if (time > 0) {\n              this.$toast.text('考试未开始')\n              location.href = '/#/examlist'\n              return\n            }\n            if (time < -1800) {\n              this.$toast.text('考试已结束')\n              location.href = '/#/examlist'\n              return\n            }\n            this.getExamList()\n            this.endTime = this.endTime + time\n          } else {\n            this.$toast.text(res.errMsg)\n          }\n        })\n    },\n    submit() {\n      let postData = {\n        score: 0,\n        answer: [],\n        questionId: [],\n        isRight: [],\n        stuId: this.stuId,\n        examName: this.examName\n      }\n      this.topicList.forEach(item => {\n        postData.answer.push(item.stuAnswer)\n        postData.questionId.push(item.questionId)\n        if (item.rightAnswer === item.stuAnswer) {\n          postData.score += 5\n          postData.isRight.push(1)\n        } else {\n          postData.isRight.push(0)\n        }\n      })\n      postData = JSON.stringify(postData)\n      this.$ajax\n        .post(`/hmu/upload?param=${encodeURIComponent(postData)}`)\n        .then(res => {\n          if (res.result === 0) {\n            this.$toast.text('提交成功')\n            this.$router.push({ name: 'examlist' })\n          } else {\n            this.$toast.text(res.errMsg)\n          }\n        })\n    },\n    countDown() {\n      this.startExam()\n      const that = this\n      let timeInt = setInterval(() => {\n        that.endTime = that.endTime - 1\n        that.endTimeShow =\n          Math.floor(that.endTime / 60) + '分' + (that.endTime % 60) + '秒'\n        if (that.endTime === 0) {\n          that.submit()\n        }\n      }, 1000)\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.exam-details {\n  .title {\n    font-size: 18px;\n    text-align: center;\n  }\n  .count-down {\n    margin: 10px;\n    text-align: right;\n  }\n  .description {\n    margin: 0 0 20px 0;\n    text-align: center;\n  }\n  .content {\n    .topic {\n      margin: 0 0 10px 0;\n    }\n    .exam-item {\n      margin: 12px;\n    }\n  }\n  .submit {\n    margin: 50px 0 40px 0;\n  }\n}\n</style>\n\n<style lang=\"less\">\n.exam-details {\n  .nut-radio-label {\n    font-size: 16px !important;\n  }\n}\n</style>\n"],"sourceRoot":"src/views"}]}