{"remainingRequest":"/Users/yang77/Desktop/h5-exam/node_modules/thread-loader/dist/cjs.js!/Users/yang77/Desktop/h5-exam/node_modules/babel-loader/lib/index.js!/Users/yang77/Desktop/h5-exam/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yang77/Desktop/h5-exam/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yang77/Desktop/h5-exam/src/views/ExamList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yang77/Desktop/h5-exam/src/views/ExamList.vue","mtime":1585409580958},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdHVJZDogbnVsbCwKICAgICAgbm90VGVzdExpc3Q6IFtdLAogICAgICB0ZXN0ZWRMaXN0OiBbXQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICBkb2N1bWVudC50aXRsZSA9ICfogIPor5XliJfooagnOwogICAgdGhpcy5zdHVJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzdHVJZCcpOwogICAgdGhpcy5nZXRFeGFtTGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0RXhhbUxpc3Q6IGZ1bmN0aW9uIGdldEV4YW1MaXN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy4kYWpheC5nZXQoIi9obXUvZ2V0R3JhZGVCeVN0dUlkLyIuY29uY2F0KHRoaXMuc3R1SWQpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnJlc3VsdCA9PT0gMCkgewogICAgICAgICAgcmVzLmRhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICBpZiAoaXRlbS5pc1VwbG9hZCkgewogICAgICAgICAgICAgIF90aGlzLnRlc3RlZExpc3QucHVzaChpdGVtKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpcy5ub3RUZXN0TGlzdC5wdXNoKGl0ZW0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuJHRvYXN0LnRleHQocmVzLmVyck1zZyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzdGFydEV4YW06IGZ1bmN0aW9uIHN0YXJ0RXhhbShleGFtTmFtZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJGFqYXguZ2V0KCIvaG11L2dldFRpbWUvIi5jb25jYXQoZXhhbU5hbWUsICIvIikuY29uY2F0KHRoaXMuc3R1SWQpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnJlc3VsdCA9PT0gMCkgewogICAgICAgICAgdmFyIHRpbWUgPSByZXMuZGF0YS5kdXJpbmc7CgogICAgICAgICAgaWYgKHRpbWUgPiAwKSB7CiAgICAgICAgICAgIHZhciBzdHIgPSBwYXJzZUludCh0aW1lIC8gNjApOwogICAgICAgICAgICBzdHIgKz0gJ+WIhic7CiAgICAgICAgICAgIHN0ciArPSB0aW1lICUgNjA7CiAgICAgICAgICAgIHN0ciArPSAn56eSJzsKCiAgICAgICAgICAgIF90aGlzMi4kdG9hc3QudGV4dCgn6Led56a76ICD6K+V5byA5aeLJyArIHN0cik7CgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRpbWUgPCAtMTgwMCkgewogICAgICAgICAgICBfdGhpczIuJHRvYXN0LnRleHQoJ+iAg+ivleW3sue7k+adnycpOwoKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAnZXhhbWRldGFpbHMnLAogICAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICAgIGV4YW1OYW1lOiBleGFtTmFtZQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMyLiR0b2FzdC50ZXh0KHJlcy5lcnJNc2cpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["ExamList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,IADA;AAEA,MAAA,WAAA,EAAA,EAFA;AAGA,MAAA,UAAA,EAAA;AAHA,KAAA;AAKA,GAPA;AAQA,EAAA,OARA,qBAQA;AACA,IAAA,QAAA,CAAA,KAAA,GAAA,MAAA;AACA,SAAA,KAAA,GAAA,YAAA,CAAA,OAAA,CAAA,OAAA,CAAA;AACA,SAAA,WAAA;AACA,GAZA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,yBACA;AAAA;;AACA,WAAA,KAAA,CAAA,GAAA,gCAAA,KAAA,KAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,UAAA,GAAA,CAAA,IAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,gBAAA,IAAA,CAAA,QAAA,EAAA;AACA,cAAA,KAAA,CAAA,UAAA,CAAA,IAAA,CAAA,IAAA;AACA,aAFA,MAEA;AACA,cAAA,KAAA,CAAA,WAAA,CAAA,IAAA,CAAA,IAAA;AACA;AACA,WANA;AAOA,SARA,MAQA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA,GAAA,CAAA,MAAA;AACA;AACA,OAZA;AAaA,KAfA;AAgBA,IAAA,SAhBA,qBAgBA,QAhBA,EAgBA;AAAA;;AACA,WAAA,KAAA,CAAA,GAAA,wBAAA,QAAA,cAAA,KAAA,KAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,cAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,MAAA;;AACA,cAAA,IAAA,GAAA,CAAA,EAAA;AACA,gBAAA,GAAA,GAAA,QAAA,CAAA,IAAA,GAAA,EAAA,CAAA;AACA,YAAA,GAAA,IAAA,GAAA;AACA,YAAA,GAAA,IAAA,IAAA,GAAA,EAAA;AACA,YAAA,GAAA,IAAA,GAAA;;AACA,YAAA,MAAA,CAAA,MAAA,CAAA,IAAA,CAAA,WAAA,GAAA;;AACA;AACA;;AACA,cAAA,IAAA,GAAA,CAAA,IAAA,EAAA;AACA,YAAA,MAAA,CAAA,MAAA,CAAA,IAAA,CAAA,OAAA;;AACA;AACA;;AACA,UAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AACA,YAAA,IAAA,EAAA,aADA;AAEA,YAAA,KAAA,EAAA;AAAA,cAAA,QAAA,EAAA;AAAA;AAFA,WAAA;AAIA,SAlBA,MAkBA;AACA,UAAA,MAAA,CAAA,MAAA,CAAA,IAAA,CAAA,GAAA,CAAA,MAAA;AACA;AACA,OAtBA;AAuBA;AAxCA;AAbA,CAAA","sourcesContent":["<template>\n  <div class=\"exam-list\">\n    <div class=\"not-tested\">\n      <div class=\"title\">待考科目</div>\n      <div v-if=\"!notTestList.length\" class=\"no-exam\">\n        暂无待考科目\n      </div>\n      <ul>\n        <li>\n          <span>考试名称</span>\n          <span>考试时间</span>\n          <span>操作</span>\n        </li>\n        <li v-for=\"(item, index) in notTestList\" :key=\"index\">\n          <span>{{ item.examName }}</span>\n          <span>{{ item.examTime }}</span>\n          <nut-button small @click=\"startExam(item.examName)\">\n            开始考试\n          </nut-button>\n        </li>\n      </ul>\n    </div>\n    <div class=\"tested\">\n      <div class=\"title\">已考科目</div>\n      <div v-if=\"!testedList.length\" class=\"no-exam\">\n        暂无已考科目\n      </div>\n      <ul v-else>\n        <li>\n          <span>考试名称</span>\n          <span>考试成绩</span>\n          <span>考试时间</span>\n        </li>\n        <li v-for=\"(item, index) in testedList\" :key=\"index\">\n          <span>{{ item.examName }}</span>\n          <span>{{ item.score }}</span>\n          <span>{{ item.examTime }}</span>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      stuId: null,\n      notTestList: [],\n      testedList: []\n    }\n  },\n  mounted() {\n    document.title = '考试列表'\n    this.stuId = localStorage.getItem('stuId')\n    this.getExamList()\n  },\n  methods: {\n    getExamList() {\n      this.$ajax.get(`/hmu/getGradeByStuId/${this.stuId}`).then(res => {\n        if (res.result === 0) {\n          res.data.forEach(item => {\n            if (item.isUpload) {\n              this.testedList.push(item)\n            } else {\n              this.notTestList.push(item)\n            }\n          })\n        } else {\n          this.$toast.text(res.errMsg)\n        }\n      })\n    },\n    startExam(examName) {\n      this.$ajax.get(`/hmu/getTime/${examName}/${this.stuId}`).then(res => {\n        if (res.result === 0) {\n          let time = res.data.during\n          if (time > 0) {\n            let str = parseInt(time / 60)\n            str += '分'\n            str += time % 60\n            str += '秒'\n            this.$toast.text('距离考试开始' + str)\n            return;\n          }\n          if (time < -1800) {\n            this.$toast.text('考试已结束')\n            return;\n          }\n          this.$router.push({\n            name: 'examdetails',\n            query: { examName: examName }\n          })\n        } else {\n          this.$toast.text(res.errMsg)\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.exam-list {\n  box-sizing: border-box;\n  padding: 12px;\n  .not-tested {\n    .title {\n      margin: 0 0 10px 0;\n    }\n  }\n  .tested {\n    .title {\n      margin: 20px 0 10px 0;\n    }\n  }\n  li {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1px solid #eaeaea;\n    padding: 10px 0;\n  }\n  .title {\n    font-size: 20px;\n  }\n  .no-exam {\n    text-align: center;\n    font-size: 16px;\n  }\n}\n</style>\n"],"sourceRoot":"src/views"}]}