{"remainingRequest":"/Users/yang77/Desktop/h5-exam/node_modules/babel-loader/lib/index.js!/Users/yang77/Desktop/h5-exam/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yang77/Desktop/h5-exam/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yang77/Desktop/h5-exam/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yang77/Desktop/h5-exam/src/views/Login.vue","mtime":1584805504378},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yang77/Desktop/h5-exam/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwaG9uZTogbnVsbCwKICAgICAgY29kZTogbnVsbCwKICAgICAgc2VuZFRleHQ6ICflj5HpgIHpqozor4HnoIEnLAogICAgICBzZW5kRGlzYWJsZTogZmFsc2UKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgZG9jdW1lbnQudGl0bGUgPSAn55+t5L+h55m76ZmGL+azqOWGjCc7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZW5kQ29kZTogZnVuY3Rpb24gc2VuZENvZGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgcmVnID0gbmV3IFJlZ0V4cCgvXjFcZHsxMH0kLyk7CgogICAgICBpZiAoIXJlZy50ZXN0KHRoaXMucGhvbmUpKSB7CiAgICAgICAgdGhpcy4kdG9hc3QudGV4dCgn5omL5py65Y+35qC85byP6ZSZ6K+vJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLiRhamF4LnBvc3QoIi9obXUvdXNlci9zZW5kc21zP3Bob25lPSIuY29uY2F0KHRoaXMucGhvbmUpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnJlc3VsdCA9PT0gMCkgewogICAgICAgICAgX3RoaXMuJHRvYXN0LnRleHQoJ+WPkemAgemqjOivgeeggeaIkOWKnycpOwoKICAgICAgICAgIF90aGlzLmNoYW5nZVNlbmRUZXh0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLiR0b2FzdC50ZXh0KHJlcy5lcnJNc2cpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY2hhbmdlU2VuZFRleHQ6IGZ1bmN0aW9uIGNoYW5nZVNlbmRUZXh0KCkgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHZhciB0aW1lID0gNjA7CiAgICAgIHRoaXMuc2VuZERpc2FibGUgPSB0cnVlOwogICAgICB2YXIgdGltZUludCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGF0LnNlbmRUZXh0ID0gdGltZS0tICsgJ+enkuWQjumHjeWPkSc7CgogICAgICAgIGlmICh0aW1lID09PSAtMSkgewogICAgICAgICAgdGhhdC5zZW5kVGV4dCA9ICflj5HpgIHpqozor4HnoIEnOwogICAgICAgICAgdGhhdC5zZW5kRGlzYWJsZSA9IGZhbHNlOwogICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGltZUludCk7CiAgICAgICAgfQogICAgICB9LCAxMDAwKTsKICAgIH0sCiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIHBvc3REYXRhID0gewogICAgICAgIHBob25lOiB0aGlzLnBob25lLAogICAgICAgIGNvZGU6IHRoaXMuY29kZSwKICAgICAgICBtb2RlOiAnc21zJwogICAgICB9OwogICAgICBwb3N0RGF0YSA9IEpTT04uc3RyaW5naWZ5KHBvc3REYXRhKTsKICAgICAgdGhpcy4kYWpheC5wb3N0KCIvaG11L3VzZXIvbG9naW4/cGFyYW09Ii5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KHBvc3REYXRhKSkpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMucmVzdWx0ID09PSAwKSB7CiAgICAgICAgICBpZiAocmVzLmRhdGEuaXNOZXcpIHsKICAgICAgICAgICAgX3RoaXMyLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgbmFtZTogJ3Jlc2lnbicsCiAgICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICAgIHBob25lOiBfdGhpczIucGhvbmUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdUT0tFTicsIHJlcy5kYXRhLnRva2VuKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzdHVJZCcsIHJlcy5kYXRhLnN0dUlkKTsKCiAgICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogJ2V4YW1saXN0JwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzMi4kdG9hc3QudGV4dChyZXMuZXJyTXNnKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBfdGhpczIuJHRvYXN0LnRleHQoZXJyKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,IADA;AAEA,MAAA,IAAA,EAAA,IAFA;AAGA,MAAA,QAAA,EAAA,OAHA;AAIA,MAAA,WAAA,EAAA;AAJA,KAAA;AAMA,GARA;AASA,EAAA,OATA,qBASA;AACA,IAAA,QAAA,CAAA,KAAA,GAAA,SAAA;AACA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AACA,UAAA,GAAA,GAAA,IAAA,MAAA,CAAA,WAAA,CAAA;;AACA,UAAA,CAAA,GAAA,CAAA,IAAA,CAAA,KAAA,KAAA,CAAA,EAAA;AACA,aAAA,MAAA,CAAA,IAAA,CAAA,SAAA;AACA;AACA;;AACA,WAAA,KAAA,CAAA,IAAA,mCAAA,KAAA,KAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA,SAAA;;AACA,UAAA,KAAA,CAAA,cAAA;AACA,SAHA,MAGA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA,GAAA,CAAA,MAAA;AACA;AACA,OAPA;AAQA,KAfA;AAgBA,IAAA,cAhBA,4BAgBA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,UAAA,IAAA,GAAA,EAAA;AACA,WAAA,WAAA,GAAA,IAAA;AACA,UAAA,OAAA,GAAA,WAAA,CAAA,YAAA;AACA,QAAA,IAAA,CAAA,QAAA,GAAA,IAAA,KAAA,MAAA;;AACA,YAAA,IAAA,KAAA,CAAA,CAAA,EAAA;AACA,UAAA,IAAA,CAAA,QAAA,GAAA,OAAA;AACA,UAAA,IAAA,CAAA,WAAA,GAAA,KAAA;AACA,UAAA,MAAA,CAAA,aAAA,CAAA,OAAA;AACA;AACA,OAPA,EAOA,IAPA,CAAA;AAQA,KA5BA;AA6BA,IAAA,KA7BA,mBA6BA;AAAA;;AACA,UAAA,QAAA,GAAA;AACA,QAAA,KAAA,EAAA,KAAA,KADA;AAEA,QAAA,IAAA,EAAA,KAAA,IAFA;AAGA,QAAA,IAAA,EAAA;AAHA,OAAA;AAKA,MAAA,QAAA,GAAA,IAAA,CAAA,SAAA,CAAA,QAAA,CAAA;AACA,WAAA,KAAA,CACA,IADA,iCACA,kBAAA,CAAA,QAAA,CADA,GAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,cAAA,GAAA,CAAA,IAAA,CAAA,KAAA,EAAA;AACA,YAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AAAA,cAAA,IAAA,EAAA,QAAA;AAAA,cAAA,KAAA,EAAA;AAAA,gBAAA,KAAA,EAAA,MAAA,CAAA;AAAA;AAAA,aAAA;;AACA;AACA;;AACA,UAAA,YAAA,CAAA,OAAA,CAAA,OAAA,EAAA,GAAA,CAAA,IAAA,CAAA,KAAA;AACA,UAAA,YAAA,CAAA,OAAA,CAAA,OAAA,EAAA,GAAA,CAAA,IAAA,CAAA,KAAA;;AACA,UAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AAAA,YAAA,IAAA,EAAA;AAAA,WAAA;AACA,SARA,MAQA;AACA,UAAA,MAAA,CAAA,MAAA,CAAA,IAAA,CAAA,GAAA,CAAA,MAAA;AACA;AACA,OAdA,EAeA,KAfA,CAeA,UAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,MAAA,CAAA,IAAA,CAAA,GAAA;AACA,OAjBA;AAkBA;AAtDA;AAZA,CAAA","sourcesContent":["<template>\n  <div class=\"login\">\n    <nut-textinput\n      class=\"phone\"\n      v-model=\"phone\"\n      label=\"手机号:\"\n      placeholder=\"请输入手机号\"\n      :clearBtn=\"true\"\n      :disabled=\"false\"\n      :hasBorder=\"false\"\n    />\n    <div class=\"code\">\n      <nut-textinput\n        class=\"code-input\"\n        v-model=\"code\"\n        label=\"验证码:\"\n        placeholder=\"请输入验证码\"\n        :clearBtn=\"true\"\n        :disabled=\"false\"\n        :hasBorder=\"false\"\n      />\n      <nut-button\n        @click=\"sendCode\"\n        small\n        :disabled=\"sendDisable\"\n        class=\"send-code\"\n      >\n        {{ sendText }}\n      </nut-button>\n    </div>\n    <nut-button class=\"login-btn\" block @click=\"login\">\n      登录\n    </nut-button>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      phone: null,\n      code: null,\n      sendText: '发送验证码',\n      sendDisable: false\n    }\n  },\n  mounted() {\n    document.title = '短信登陆/注册'\n  },\n  methods: {\n    sendCode() {\n      let reg = new RegExp(/^1\\d{10}$/)\n      if (!reg.test(this.phone)) {\n        this.$toast.text('手机号格式错误')\n        return\n      }\n      this.$ajax.post(`/hmu/user/sendsms?phone=${this.phone}`).then(res => {\n        if (res.result === 0) {\n          this.$toast.text('发送验证码成功')\n          this.changeSendText()\n        } else {\n          this.$toast.text(res.errMsg);\n        }\n      })\n    },\n    changeSendText() {\n      const that = this\n      let time = 60\n      this.sendDisable = true\n      let timeInt = setInterval(() => {\n        that.sendText = time-- + '秒后重发'\n        if (time === -1) {\n          that.sendText = '发送验证码'\n          that.sendDisable = false\n          window.clearInterval(timeInt)\n        }\n      }, 1000)\n    },\n    login() {\n      let postData = {\n        phone: this.phone,\n        code: this.code,\n        mode: 'sms'\n      }\n      postData = JSON.stringify(postData);\n      this.$ajax\n        .post(`/hmu/user/login?param=${encodeURIComponent(postData)}`)\n        .then(res => {\n          if (res.result === 0) {\n            if (res.data.isNew) {\n              this.$router.push({ name: 'resign', query: {phone: this.phone}});\n              return;\n            }\n            localStorage.setItem('TOKEN', res.data.token)\n            localStorage.setItem('stuId', res.data.stuId)\n            this.$router.push({ name: 'examlist'})\n          } else {\n            this.$toast.text(res.errMsg);\n          }\n        })\n        .catch(err => {\n          this.$toast.text(err)\n        })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.login {\n  box-sizing: border-box;\n  margin: 50px 0 0 0;\n  padding: 20px;\n  .phone {\n    margin: 0 0 10px 0;\n    border-bottom: 1px solid #eaeaea;\n  }\n  .code {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin: 0 0 10px 0;\n    border-bottom: 1px solid #eaeaea;\n  }\n  .login-btn {\n    margin: 50px 0 0 0;\n  }\n}\n</style>\n\n<style lang=\"less\">\n.code-input {\n  input {\n    width: 140px;\n  }\n}\n</style>\n"],"sourceRoot":"src/views"}]}